{"version":3,"file":"index.cjs","sources":["../projectLog.ts","../JensenClient.ts","../index.ts"],"sourcesContent":["export enum ProjectLogType\n{\n    USER_EVENT = 'User Event',\n    USER_FAILURE = 'User Failure',\n    DATABASE_INFORMATION = 'Database Information',\n    DATABASE_FAILURE = 'Database Failure',\n    SYSTEM_INFORMATION = 'System Information',\n    SYSTEM_FAILURE = 'System Failure',\n    AUTOMATED_INFORMATION = 'Automated Information',\n    AUTOMATED_FAILURE = 'Automated Failure',\n    EXTERNAL_VENDOR_INFORMATION = 'External Vendor Information',\n    EXTERNAL_VENDOR_FAILURE = 'External Vendor Failure',\n}\n\nexport type ProjectLog = \n{\n    content: string;\n    description: string;\n    eventMetadata?: Record<string, any>;\n    eventType: ProjectLogType;\n    timeElapsed?: number | null;\n    userEmailInvoker?: string | null;\n    userNameInvoker?: string | null;\n}","import { ProjectLog, ProjectLogType } from \"./projectLog\";\n\n\nclass JensenDispatcher\n{\n    private projectKey: string;\n    // private url = 'http://localhost:3000/api/logs';\n    private url = 'https://fireblade.jensenlabs.dev/api/logs';\n\n    constructor()\n    {\n        // grab a possible of publicly available keys based on different frameworks\n        // for instance, NEXT_PUBLIC_FIREBLADE_API_KEY for Next.js\n        // or REACT_APP_FIREBLADE_API_KEY for React\n        const publicProjectKey = process.env.NEXT_PUBLIC_FIREBLADE_API_KEY || process.env.REACT_APP_FIREBLADE_API_KEY || process.env.FIREBLADE_API_KEY || '';\n        this.projectKey = publicProjectKey;\n        if (!this.projectKey)\n        {\n            throw new Error(\"You must supply a project key for the Jensen Fireblade Client to work.\");\n        }\n    }\n\n\n    public async sendEvent(data: {\n        title: string, \n        description: string, \n        logType: ProjectLogType,\n        eventMetadata?: Record<string, any>,\n        timeElapsed?: number | null,\n        userEmailInvoker?: string | null,\n        userNameInvoker?: string | null\n    }): Promise<void>\n    {\n        const { title, description, eventMetadata, timeElapsed, userEmailInvoker, userNameInvoker } = data;\n        const projectLog: ProjectLog = {\n            content: title,\n            description: description,\n            eventMetadata: eventMetadata,\n            eventType: ProjectLogType.USER_EVENT,\n            timeElapsed: timeElapsed,\n            userEmailInvoker: userEmailInvoker,\n            userNameInvoker: userNameInvoker\n        };\n\n        const response = await fetch(this.url, {\n            method: 'POST',\n            headers: {\n                'Content-Type': 'application/json',\n                'Authorization': `Bearer ${this.projectKey}`,\n            },\n            body: JSON.stringify(projectLog)\n        });\n\n        if (!response.ok)\n        {\n            console.error(response);\n            throw new Error(\"Failed to send event to Jensen API\");\n        }\n    }\n}\n\n/**\n * JensenClient\n * @description The JensenClient class is a wrapper around the JensenDispatcher class that provides a more user-friendly interface for sending events to the Fireblade API.\n * @example\n * ```typescript\n * import { JensenClient } from \"./JensenClient\";\n * const jensen = new JensenClient();\n * jensen.userEvent({\n *      title: 'Test',\n *      description: 'Test'\n * });\n */\nexport class JensenClient extends JensenDispatcher\n{\n    // we want to inherit the constructor and then overload the sendEvent function for each projectlog type\n    // we can use the super keyword to call the parent class constructor\n    constructor()\n    {\n        super();\n    }\n\n    public async userEvent(data: {\n        title: string, \n        description: string, \n        eventMetadata?: Record<string, any>,\n        timeElapsed?: number | null,\n        userEmailInvoker?: string | null,\n        userNameInvoker?: string | null\n    }): Promise<void>\n    {\n        return this.sendEvent({\n            ...data,\n            logType: ProjectLogType.USER_EVENT\n        });\n    }\n\n    public async userFailure(data: {\n        title: string, \n        description: string, \n        eventMetadata?: Record<string, any>,\n        timeElapsed?: number | null,\n        userEmailInvoker?: string | null,\n        userNameInvoker?: string | null\n    }): Promise<void>\n    {\n        return this.sendEvent({\n            ...data,\n            logType: ProjectLogType.USER_FAILURE\n        });\n    }\n\n    public async databaseInformation(data: {\n        title: string, \n        description: string, \n        eventMetadata?: Record<string, any>,\n        timeElapsed?: number | null,\n        userEmailInvoker?: string | null,\n        userNameInvoker?: string | null\n    }): Promise<void>\n    {\n        return this.sendEvent({\n            ...data,\n            logType: ProjectLogType.DATABASE_INFORMATION\n        });\n    }\n\n    public async databaseFailure(data: {\n        title: string, \n        description: string, \n        eventMetadata?: Record<string, any>,\n        timeElapsed?: number | null,\n        userEmailInvoker?: string | null,\n        userNameInvoker?: string | null\n    }): Promise<void>\n    {\n        return this.sendEvent({\n            ...data,\n            logType: ProjectLogType.DATABASE_FAILURE\n        });\n    }\n\n    public async systemInformation(data: {\n        title: string, \n        description: string, \n        eventMetadata?: Record<string, any>,\n        timeElapsed?: number | null,\n        userEmailInvoker?: string | null,\n        userNameInvoker?: string | null\n    }): Promise<void>\n    {\n        return this.sendEvent({\n            ...data,\n            logType: ProjectLogType.SYSTEM_INFORMATION\n        });\n    }\n\n    public async systemFailure(data: {\n        title: string, \n        description: string, \n        eventMetadata?: Record<string, any>,\n        timeElapsed?: number | null,\n        userEmailInvoker?: string | null,\n        userNameInvoker?: string | null\n    }): Promise<void>\n    {\n        return this.sendEvent({\n            ...data,\n            logType: ProjectLogType.SYSTEM_FAILURE\n        });\n    }\n\n    public async automatedInformation(data: {\n        title: string, \n        description: string, \n        eventMetadata?: Record<string, any>,\n        timeElapsed?: number | null,\n        userEmailInvoker?: string | null,\n        userNameInvoker?: string | null\n    }): Promise<void>\n    {\n        return this.sendEvent({\n            ...data,\n            logType: ProjectLogType.AUTOMATED_INFORMATION\n        });\n    }\n\n    public async automatedFailure(data: {\n        title: string, \n        description: string, \n        eventMetadata?: Record<string, any>,\n        timeElapsed?: number | null,\n        userEmailInvoker?: string | null,\n        userNameInvoker?: string | null\n    }): Promise<void>\n    {\n        return this.sendEvent({\n            ...data,\n            logType: ProjectLogType.AUTOMATED_FAILURE\n        });\n    }\n\n    public async externalVendorInformation(data: {\n        title: string, \n        description: string, \n        eventMetadata?: Record<string, any>,\n        timeElapsed?: number | null,\n        userEmailInvoker?: string | null,\n        userNameInvoker?: string | null\n    }): Promise<void>\n    {\n        return this.sendEvent({\n            ...data,\n            logType: ProjectLogType.EXTERNAL_VENDOR_INFORMATION\n        });\n    }\n\n    public async externalVendorFailure(data: {\n        title: string, \n        description: string, \n        eventMetadata?: Record<string, any>,\n        timeElapsed?: number | null,\n        userEmailInvoker?: string | null,\n        userNameInvoker?: string | null\n    }): Promise<void>\n    {\n        return this.sendEvent({\n            ...data,\n            logType: ProjectLogType.EXTERNAL_VENDOR_FAILURE\n        });\n    }\n\n    public async customEvent(data: {\n        title: string, \n        description: string, \n        logType: ProjectLogType,\n        eventMetadata?: Record<string, any>,\n        timeElapsed?: number | null,\n        userEmailInvoker?: string | null,\n        userNameInvoker?: string | null\n    }): Promise<void>\n    {\n        return this.sendEvent(data);\n    }\n}","import { JensenClient } from \"./JensenClient\";\nimport * as dotenv from 'dotenv';\ndotenv.config();\n\nexport default class JensenClientFactory\n{\n    public static createClient(): JensenClient\n    {\n        return new JensenClient();\n    }\n}"],"names":["ProjectLogType","JensenClient","_JensenDispatcher2","call","_proto2","prototype","userEvent","data","Promise","resolve","this","sendEvent","_extends","logType","USER_EVENT","e","reject","userFailure","USER_FAILURE","databaseInformation","DATABASE_INFORMATION","databaseFailure","DATABASE_FAILURE","systemInformation","SYSTEM_INFORMATION","systemFailure","SYSTEM_FAILURE","automatedInformation","AUTOMATED_INFORMATION","automatedFailure","AUTOMATED_FAILURE","externalVendorInformation","EXTERNAL_VENDOR_INFORMATION","externalVendorFailure","EXTERNAL_VENDOR_FAILURE","customEvent","JensenDispatcher","projectKey","url","publicProjectKey","process","env","NEXT_PUBLIC_FIREBLADE_API_KEY","REACT_APP_FIREBLADE_API_KEY","FIREBLADE_API_KEY","Error","fetch","method","headers","Authorization","body","JSON","stringify","content","title","description","eventMetadata","eventType","timeElapsed","userEmailInvoker","userNameInvoker","then","response","ok","console","error","dotenv","config","JensenClientFactory","createClient"],"mappings":"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"}